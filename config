-------------------------
-       SONARQUBE       -
-------------------------

cd /Users/alberto/Developer/temperatus/
mysql.server start
sonar start
sonar-runner

user: admin
pass: admin

-------------------------
-       DATABASE        -
-------------------------

name: database.h2.db
user: aquesada
pass: temperatus2015


DROP TABLE IF EXISTS PROJECT;
CREATE TABLE PROJECT(
    ID INT AUTO_INCREMENT,
    NAME VARCHAR(100),
    OBSERVATIONS CLOB,

    PRIMARY KEY(ID) );

DROP TABLE IF EXISTS EXPERIMENT;
CREATE TABLE EXPERIMENT (
    ID INT AUTO_INCREMENT,
    AUTHOR VARCHAR(30) NOT NULL,
    DATE_INI DATE,
    DATE_END DATE,
    OBSERVATIONS CLOB,
    PROJECT_ID INT,

    PRIMARY KEY(ID),
    CONSTRAINT FK_E_P_ID FOREIGN KEY(PROJECT_ID) REFERENCES PROJECT(ID) );

DROP TABLE IF EXISTS GAME;
CREATE TABLE GAME (
    ID INT AUTO_INCREMENT,
    TITLE VARCHAR(100),
    NUM_BUTTONS INT,
    OBSERVATIONS CLOB,

    PRIMARY KEY(ID) );

DROP TABLE IF EXISTS POSITION;
CREATE TABLE POSITION (
    ID INT AUTO_INCREMENT,
    PLACE VARCHAR(100),
    PICTURE VARCHAR(200),

    PRIMARY KEY(ID) );

DROP TABLE IF EXISTS GAME_POSITION;
CREATE TABLE GAME_POSITION (
    ID INT AUTO_INCREMENT,
    GAME_ID INT,
    POSITION_ID INT,

    PRIMARY KEY(ID),
    CONSTRAINT FK_GP_G_ID FOREIGN KEY(GAME_ID) REFERENCES GAME(ID),
    CONSTRAINT FK_GP_P_ID FOREIGN KEY(POSITION_ID) REFERENCES POSITION(ID) );

DROP TABLE IF EXISTS TEST;
CREATE TABLE TEST (
    ID INT AUTO_INCREMENT,
    NAME VARCHAR(100),
    EXPERIMENT_ID INT,
    GAME_ID INT,
    DATE DATE,

    PRIMARY KEY(ID),
    CONSTRAINT FK_T_E_ID FOREIGN KEY(EXPERIMENT_ID) REFERENCES EXPERIMENT(ID),
    CONSTRAINT FK_T_G_ID FOREIGN KEY(GAME_ID) REFERENCES GAME(ID) );

DROP TABLE IF EXISTS IBUTTON;
CREATE TABLE IBUTTON (
    ID INT AUTO_INCREMENT,
    SERIAL VARCHAR(200),
    MODEL VARCHAR(200),
    DEFAULTPOS INT,

    PRIMARY KEY(ID),
    CONSTRAINT FK_IB_P_ID FOREIGN KEY(DEFAULTPOS) REFERENCES POSITION(ID) );

DROP TABLE IF EXISTS BUTTON;
CREATE TABLE BUTTON (
    ID INT AUTO_INCREMENT,
    TEST_ID INT,
    IBUTTON_ID INT,
    POSITION_ID INT,

    PRIMARY KEY(ID),
    CONSTRAINT FK_B_T_ID FOREIGN KEY(TEST_ID) REFERENCES TEST(ID),
    CONSTRAINT FK_B_IB_ID FOREIGN KEY(IBUTTON_ID) REFERENCES IBUTTON(ID),
    CONSTRAINT FK_B_P_ID FOREIGN KEY(POSITION_ID) REFERENCES POSITION(ID) );

DROP TABLE IF EXISTS DATA;
CREATE TABLE DATA (
    ID INT AUTO_INCREMENT,
    BUTTON_ID INT,
    DATE DATE,
    DATA CLOB,

    PRIMARY KEY(ID),
    CONSTRAINT FK_D_B_ID FOREIGN KEY(BUTTON_ID) REFERENCES BUTTON(ID) );
CREATE INDEX BUTTON_INDEX ON DATA(BUTTON_ID);


-------------------------
-                       -
-------------------------



